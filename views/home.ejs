<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Latest compiled and minified CSS -->
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <title>Books</title>
  </head>
  <body>
    <div class="container">
      <h1>Text Books</h1>
      <div>
        <nav class="navbar navbar-expand-sm bg-dark">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link text-light" href="/home">Home</a>
            </li>
            
          </ul>
          
          <% if(userStatus.loggedIn) { %>

            <ul class="navbar-nav ml-auto">
              <li class="nav-item">
                <a class="nav-link text-light" href="/dashboard">Dashboard</a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-light" href="/cart">Cart</a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-light" href="/profile/<%=userStatus.userid %>"><%= userStatus.username %> </a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-light" href="/logout">Logout</a>
              </li>
            </ul>
            
          <% }else { %>

            <ul class="navbar-nav ml-auto">
              <li class="nav-item">
                <a class="nav-link text-light" href="/login">Login</a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-light" href="/register">Register</a>
              </li>
            </ul>
          <% } %>



        </nav>
      </div>
      <!--    -->

      <div class="row">
        <% allBooks.forEach((item) => {%>

        <div class="col-sm-3 mt-5 text-center"  >
          <div class="card border-0">
            <img
              class="card-img-top"
              src="data:image/<%=item.contenttype%>;base64,
                     <%=item.img.toString('base64')%>"
              width="70"
              height="300"
              alt="Card image"
            />
            <div class="card-body justify-content-center">
              <h4 class="card-title text-center"><%= item.title%></h4>
              <p class="card-text text-center"><%= item.description%></p>
              <h1 class="text-center">$<%= item.price%></h1>
              <a href="/details/<%=item.bookid%>" class="btn btn-primary mt-3" >Book Details</a>
            </div>
          </div>
        </div>
        <% }) %>


      </div>

    </div>
  </body>
</html>
